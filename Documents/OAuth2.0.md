<!-- TOC -->

- [OAuth 2.0 简介](#oauth-20-简介)
- [OAuth 2.0 进一步介绍](#oauth-20-进一步介绍)
    - [资源所有者](#资源所有者)
    - [受保护资源](#受保护资源)
    - [客户端](#客户端)
    - [委托/委派权限](#委托委派权限)
    - [授权方式](#授权方式)
        - [授权码模式(Authorization Code)](#授权码模式authorization-code)
        - [简化模式(Implicit)](#简化模式implicit)
        - [密码模式(Resource Owner Password Credentials)](#密码模式resource-owner-password-credentials)
        - [客户端模式(Client Credentials)](#客户端模式client-credentials)

<!-- /TOC -->

## OAuth 2.0 简介

- **OAuth 2.0** 是一个委托协议，它可以让那些控制资源的人允许某个应用以代表他们来访问他们控制的资源(**注意：是代表不是假冒或模仿**)，这些饮用从资源的所有者获得到 **授权(Authorization)** 和 **access token**，随后就可以使用 **access token**来访问资源
- 所谓假冒或模仿是指客户端复制了一份用户的**用户名和密码**，从而获得响应的权限
- **OAuth 2.0** 是一个开放的协议，它允许使用简单和标准的方法从 Web，移动端或桌面应用来进行安全的授权(Authorization)
- 一句话概括：**OAuth 2.0**是关于授权(Authorization)的，其他应用可以请求**access token**，使用这个**token**就可以访问**API 资源**了
- **OAuth 2.0**的**accecc token**只能用来访问资源，它无法被用来登陆客户端应用，登陆这种操作叫**认证/身份验证(Authentication)**，使用的是基于**OAuth 2.0**之上的**OpenID Connect**

## OAuth 2.0 进一步介绍

目标：**OAuth 2.0**的目标就是让 **客户端** 应用可以代表 **资源所有者(通常是用户)** 来访问 **受保护资源**

### 资源所有者

这里的资源所有者，他拥有访问 API 资源的权限，并且他可以**委派权限(delegate)**给其他应用来访问 API，资源所有者通常是可以使用浏览器/APP 的人

### 受保护资源

受保护资源就是资源所有者拥有权限去访问的组件，他可以是很多种形式，但**Web API**的形式还是最常见的

### 客户端

客户端应用就是代表资源所有者访问受保护资源的一个软件，在**OAuth 2.0**中，这里指的是受保护资源的**API 资源的消费者**，不是单纯的认为就是个浏览器或 APP

### 委托/委派权限

在**OAuth 2.0**里，最终用户可以委派他的一部分权限给客户端应用来代表最终用户来访问受保护的资源，完成这件事需要一个桥梁来链接客户端应用和受保护资源，这个组件叫**授权服务器(Authorization Server,AS)**，这个授权服务器可以就是资源服务器或者是与不同的服务器

授权服务器是被受保护资源所信任的，它可以发行具有特定目的的安全凭据给客户端应用，这个凭据就是**OAuth**的**access token**

![Authroization Flow.png](https://i.loli.net/2019/05/22/5ce4cde5a45ec75342.png)

运行流程介绍

1. 用户打开客户端以后，客户端要求用户给予授权
2. 用户同意给予客户端授权
3. 客户端使用上一步的授权，向授权服务器申请令牌
4. 授权服务器对客户端进行认证以后，确认无误，同意发放令牌
5. 客户端使用令牌，向资源所有者申请获得资源
6. 资源所有者确认令牌无误，同意向客户端开放受保护资源

### 授权方式

#### 授权码模式(Authorization Code)
授权码模式是功能最完整，流程最严密的授权模式，

#### 简化模式(Implicit)

#### 密码模式(Resource Owner Password Credentials)

#### 客户端模式(Client Credentials)
